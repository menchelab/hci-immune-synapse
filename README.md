# Morphological profiling of human T and NK lymphocytes identifies actin-mediated control of the immunological synapse

## Study authors

Yolla German\*,  Loan Vulliard\*, Aude Rubio, Audrey Ferrand, Kaan Boztug, Jörg Menche and Loïc Dupré

Correspondence to: loic.dupre[at]inserm.fr


## Data availability

The notebooks are split according to the experiments presented in this study and can be run independently. They require the measurements obtained from CellProfiler and the plate layouts as input. All files used in this analysis are provided on FigShare (DOI: 10.6084/m9.figshare.11619960), as well as the CellProfiler 3.0 pipelines used to generate them. Before running the scripts, download the archive provided and unzip it in the root folder of this repository. You should have the following directory structure:

* A folder called **Pipelines** with the CellProfiler batch files used to generate the morphological measurements.
* A folder called **Rsc** containing morphological measurements and plate layouts.
* A folder called **Fig**, empty at first, in which figures will be generated by running the scripts.
* A folder called **Tab**, empty at first, in which data tables will be generated by running the scripts.

## Code summary

Several notebooks are provided, showing the analysis presented in the paper and how the figures were generated.

## Running the code using Docker

### General instructions

This repository compiles a collection of scripts and Jupyter notebooks. For reproducibility, it is designed to run in a Docker container based on the [jupyter/datascience-notebook image](https://hub.docker.com/r/jupyter/datascience-notebook). The following steps describe how to run the code in the same development environment as intended:

* [Install and run Docker Desktop](https://www.docker.com/get-started) on your machine (the Community Edition is available for free).
* Clone this repository and set its root folder as your working directory.
* Run the following command the first time you want to run code from this repository - which might take some time to download all requirements:

		docker build --rm -t hci-immune-synapse .
	
* Put the required input data in the repository and create output folders (see section Data availability).

		unzip GermanVulliard2020.zip
        
* Run the following each time you want to start a notebook server to run code from this repository:

		docker run -p 9999:8888 -v `pwd`:/home/jovyan hci-immune-synapse

* Find the token needed to connect to the Jupyter notebook in the console output and go to the corresponding address in your browser:

	http://127.0.0.1:9999/?token=<yourToken&gt;

* You can now choose a notebook to run.
* Close the notebook server and the docker container by pressing CTRL+C in your terminal.

## Troubleshoot

If the notebooks crash and restart, you might need to increase the resources allocated to Docker in the Docker Settings menu. This was successfully run with 2 CPUs, 12GB of RAM and 2GB of swap space.  

### Note for Windows users

You can follow the general instructions in a PowerShell. After installing Docker desktop, you might need to:

* Run and complete the following procedure:
		
		docker login

* Share the drive in which you cloned this repository in Docker's settings
* Run the notebook server explicitely stating the path to this repository:

		docker run -p 9999:8888 -v C:\<pathOnYourComputer>:/home/jovyan hci-immune-synapse
		
### Note for Linux users

You can follow the general instructions. You might need to run Docker with super-user privileges depending on your setup, *i.e.* using *sudo docker* in all calls to Docker.

### Note for MacOS users

You can follow the general instructions.



[![DOI](https://zenodo.org/badge/217304173.svg)](https://zenodo.org/badge/latestdoi/217304173)
